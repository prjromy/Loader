<!DOCTYPE html>
<html>
@{
    Loader.Service.LayoutMenuMainService menumainService = new Loader.Service.LayoutMenuMainService();

}
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>@ViewBag.Title - My ASP.NET Application</title>

    @Styles.Render("~/AdminLTE/css")
    @Scripts.Render("~/bundles/modernizr")
    @*<link href = "http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css"
        rel = "stylesheet" >*@
    @*<link href="~/Content/Site.css" rel="stylesheet" />*@
    <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" />
    <link href="~/Content/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/jquery.form.min.js"></script>
    @*<link href="~/Content/jquery-ui.css" rel="stylesheet" />*@

    <!-- Tell the browser to be responsive to screen width -->
    <style>
        html {
            font-size: 16px;
            font-family: 'Abel', sans-serif;
        }
        .popupalert {
            display: block;
            width: 211px;
            height: 85px;
            background-color: #c5c5cdad;
            margin-left: 75%;
            text-align: center;
        }
    </style>




</head>

<body class="hold-transition skin-blue-light sidebar-mini fixed main-application-body" style="font-family: 'Abel', sans-serif;">
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/jqueryval")
    @*@Scripts.Render("~/Scripts/jquery.validate.min.js")
    @Scripts.Render("~/Scripts/jquery.validate.unobtrusive.min.js")*@
    @Scripts.Render("~/bundles/scripts")
    @*<script src="~/Scripts/jquery.validate.min.js"></script>*@

    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
   
    @*<script src="~/AdminLTE/plugins/slimScroll/jquery.slimscroll.min.js"></script>*@
    <script src="~/Scripts/jquery-1.11.1.ui.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    @*<style>
            html {
                font-size: 14px;
               font-family: 'Abel', sans-serif;
            }
        </style>*@


    <div class="wrapper">
        <!-- Main Header -->
        @Html.Hidden("UniqueKey", new { @id = "UniqueKey" })
        <header class="main-header">
            @Html.Partial("_Layout-Header")

        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar" style="height: 580px !important;overflow: auto;">

            <!-- sidebar: style can be found in sidebar.less -->
            @Html.Partial("_Layout-Sidebar", menumainService.GetLayoutMenuGroupTree());

        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper" style="padding-top:50px;font-family: 'Abel', sans-serif;">
            <!-- Main content -->
            <section class="content">
                <!-- Your Page Content Here -->

                @RenderBody()

                @RenderSection("Scripts", required: false)
            </section>
            <!-- /.content -->
            <div class="popupalert" style="display:none;"></div>
        </div>
        <!-- /.content-wrapper -->

        <div class="loaderContainer" style="display:none;background:rgba(86, 80, 80, 0.18);position: fixed;top:0;left:0;width: 100vw;height: 100vh;z-index: 99999;">
            <div class="loader"></div>
        </div>
        <!-- Main Footer -->
        <footer class="main-footer">
            <!-- To the right -->
            <div class="pull-right hidden-xs">
                Anything you want
            </div>
            <!-- Default to the left -->
            <strong>Copyright &copy; 2016 <a href="#"> Channakya Software Pvt. Ltd.</a>.</strong> All rights reserved.
        </footer>

        @Html.Partial("_Layout-Control-Sidebar")
    </div>
</body>
</html>
@*<img id="loadingajax" src="~/Images/animatedEllipse.gif"/>*@
<script>
    $(document).ready(function () {
        $(document).bind("ajaxSend", function () {
            $('.loaderContainer').show().find('.loader').css({ "top": "50%", "left": "50%" });
        }).bind("ajaxStop", function () {
            $('.loaderContainer').hide();
        });
    });
</script>

<script language="javascript" type="text/javascript">
    $(document).ready(function () {

            $(window).bind("beforeunload", function () {
                debugger;
                $('.sidebar').find('.main-side-tree').find('.master').nextAll('li').slideToggle();
                //return confirm("You are about to close the window");
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("EndSession", "Account")',
                    dataType: "html",
                    success: function (html) {
                    },
                    error: function () {
                        alert("error");
                    }
                });
            });


        });
</script>
<script>
    $(function () {
        // Show a pop up if it works
        // Reference the auto-generated proxy for the hub.
        var notification = $.connection.notificationHub;
        // Create a function that the hub can call back to display messages.
        notification.client.SendNotification = function (countNotification) {
            // Add the message to the page.
            debugger;
            $(".popupalert").html("<h3 style='padding:20px;'>You have a new task</h6>");
            $(".popupalert").show();
            $(".popupalert").delay(2000).fadeOut(2000);
        };
       
        // Get the user name and store it to prepend to messages.
        //$('#userkey').val(prompt('Enter notification code:', ''));
        //$('#displayname').val(prompt('Enter your name:', ''));
        // Set initial focus to message input box.
        $('#message').focus();
        // Start the connection.
        $.connection.hub.start().done(function () {
            $('.main-header').click(function () {
                notification.server.sendNotification(3045);
            });
            $('.emoji').click(function () {
                if ($('#displayname').val() === "") {
                    var name = anynom;
                }
                else {
                    var name = $('#displayname').val();
                }
                // Call the Send method on the hub.
                var emojisrc = $(this).attr("src");
                notification.server.alerts(name, emojisrc, $('#userkey').val());
                // Clear text box and reset focus for next comment.
            });
            $("#message").keyup(function (e) {
                debugger;
                if (e.keyCode === 13) {
                    $("#sendmessage").click();
                }
            });
        });
    });
    // This optional function html-encodes messages for display in the page.
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>

<style>
    /*.loader {
        position: fixed;
        top: 50%;
        left: 50%;
        border: 2px solid #f3f3f3;
        border-radius: 50%;
        border-top: 2px solid #3498db;
        width: 50px;
        height: 50px;
        -webkit-animation: spin 2s linear infinite;
        animation: spin 2s linear infinite;
    }*/

    .fa {
        font-size: initial !important;
    }
</style>